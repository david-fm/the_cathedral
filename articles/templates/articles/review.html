<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cathedral</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'normalize.css' %} ">
    <link rel="stylesheet" href="{% static '/articles/review.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
    
    <header>
        <div>
            <nav class="navtop">
                <ul class="ultop">
                    <button type="button" class="menu" @click="retrieve_blocks">Save</button>
                    <button type="button" class="menu" @click="retrieve_blocks">Publish</button>
                    <button type="button" class="menu" @click="window.location.replace('{% url 'main:index' %}')">Home</button>
                </ul>
            </nav>
        </div>
    </header>
   
    <main>
        <form class="area" method="POST" action="">
            {% csrf_token %}    
            <p  class="keywords_p"><span>Keywords:</span><span  class="keywords_container keywords_block_content">{{keywords.keyword}}</span></p>
            <div class="blocks-container">
                

                {% for block in blocks %}
                <div class="block-container">
                    <div class="block" id="{{block.id}}" >
                        {% if block.blocktext %}
                        <textarea class="text_container text_block_content">{% if block.blocktext.text %}{{block.blocktext.text}}{% endif%}</textarea>
                        {% elif block.blockimage %}
                            <div class="image_div" >
                                <img class="image_container block_content" src="{{ MEDIA_URL }}{{block.blockimage.file_path.url}}" alt="image">
                            </div>
                        {% elif block.blockvideo %}
                            {% if block.blockvideo.url %}
                            <div class="image_div">
                                <iframe width="420" height="315" src="{{block.blockvideo.url}}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                            </div>
                            {% endif %}
                        {% elif block.blockauthors%}
                            {% if  block.blockauthors.authors %}
                            <div class="authors-container">
                                {% for author in block.blockauthors.authors.all %}
                                    <p>{{author.username}}</p>
                                {% endfor %}
                            </div>
                            {% endif %}
                        {% elif block.blockreferences %}
                            
                            <div class="references-container">
                                <h3 class="references_container references_block_content" >
                                    {% if block.blockreferences.title %}
                                    {{block.blockreferences.title}}
                                    {% endif %}
                                </h3>
                                {% if block.blockreferences.url %}
                                <a href="{{block.blockreferences.url}}" class="references_container references_block_content" >Link to article</a>
                                {% endif %}
                            </div>
                        {% elif block.blocktitle %}
                            <h2 class="title_container title_block_content" >
                                {% if block.blocktitle.title %}
                                {{block.blocktitle.title}}
                                {% endif %}
                            </h1>
                        {% elif block.blockquiz %}
                            <div class="quiz-container">
                                <h3  class="quiz_container quizzes_block_content" >
                                    {% if block.blockquiz.name %}
                                    {{block.blockquiz.name}}
                                    {% endif %}
                                </h3>
                                <div class="quiz-questions">
                                    {% for  question in  block.blockquiz.questions_set.all %}
                                    <div class="quiz-question" id="{{question.id}}">
                                        
                                        <p  class="quiz-question__title question_container question_block_content">
                                        {% if question.question %}
                                            {{question.question}}
                                        {% endif %}
                                        </p>
                                        
                                        <div class="quiz-answers">

                                            {% for answer in question.answer_set.all %}
                                            <div class="quiz-answer" id ="{{answer.id}}">

                                                <input type="radio" name="quiz" class="answer_container answer_block_content" >

                                                <label for="quiz{{forloop.counter}}"  class="answer_container answer_block_content">
                                                    {% if answer.answer %}
                                                    {{answer.answer}}
                                                    {% endif %}
                                                </label>
                                            </div>
                                            {% endfor %}
                                            
                                        </div>
                                    </div>
                                    
                                    {% endfor %}
                                </div>
                            </div>
                        {% endif %}
                        
                        <!--textarea is important to mantain the \n-->
                    </div>
                    {%if block.comments%}
                   
                    <div class="comment">
                        <div class="add">
                            <form action="" class="entry">
                                <input class="entry-input" type="text" placeholder="New entry" name="a">
                                <div class="duo">
                                        <button type="submit" class="two">Comment</button>
                                        <button type="submit" class="two">Reject</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            
        </form>

    </main>
</body>

</html>